# ðŸ““ Vekku Project Journal
**Entry:** 3
**Date:** 2025-12-15
**Phase:** Implementation

## Context: Adding Intelligence to the System
In the previous entry, we established the **Body** of Vekku: the graph structure that holds our Tags and their hierarchical relationships. Now, we are giving Vekku a **Brain**.

A purely rigid graph is dumb. If I type "cooking", and the system only knows about "Baking", a simple string match fails. We need a system that understands *meaning* (Semantics), not just *spelling* (Syntax). This is where the **Brain Service** comes in.

## Decisions: Why Vector Search (RAG)?
We chose to implement a **Retrieval-Augmented Generation (RAG)** pattern, relying on **Vector Embeddings**.

### The Alternatives Considered:
1.  **Regex/Fuzzy Matching**: Good for typos ("cookign" -> "cooking"), but bad for concepts ("Food" != "Meal").
2.  **LLM Calls (OpenAI/Gemini)**: Too slow and expensive for every single keystroke in an autocomplete field.

### The Solution: Local Vectors
We went with a local embedding approach using **Qdrant** (Vector Database) and **Spring AI**.
-   **Speed**: Embeddings are generated locally (ONNX model).
-   **Intelligence**: High dimensional vectors capture semantic relationships.
-   **Scalability**: Qdrant is optimized for nearest-neighbor search.

## Implementation: `QdrantBrainService`
We built the `QdrantBrainService` as the concrete implementation of our `BrainService` interface. It has two main lobes:

1.  **The Learning Lobe (`learnTag`)**:
    -   When we save a tag in Neo4j, we also "teach" it to the Brain.
    -   The Brain converts "Machine Learning" into a vector `[0.3, -0.1, ...]` and stores it.

2.  **The Suggestion Lobe (`suggestTags`)**:
    -   When a user types a query, the Brain converts that query into a vector.
    -   It asks Qdrant: *"What are the 5 vectors closest to this thought?"*
    -   We increased the `topK` to 5 to ensure diversity in suggestions.

## Next Steps
We now have two independent heavy-hitters:
1.  **Neo4jTagService**: The persistent Truth.
2.  **QdrantBrainService**: The fuzzy Recommender.

The next critical step is **Integration**. We need to wire these two together so that creating a Tag automatically triggers the learning process, keeping the Brain in sync with the Body.
